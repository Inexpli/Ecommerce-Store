{% extends 'store/base.html' %}
{% load static %}
{% block title %}TEST{% endblock %}
{% block nav-home %}
text-white
{% endblock %}
{% block content %}
<div class="row">
    <div class="col-lg-6">
        <img style="border:1px solid #888" src="{{ product.image.url }}">
    </div>

    <div style="padding:50px" class="col-lg-6">

        <h3>{{ product.name }}</h3>
        <hr>

        <form method="POST" action="{% url 'store:product' product.id %}">
            {% csrf_token %}
            <input min="1" value=1 type="number" name="quantity">
            <input class="btn btn-dark" type="submit" value="Add to Cart">
        </form>

        <h2>Price: ${{ product.price }}</h2>
    </div>
</div>
<script type="text/javascript">
    function getCookie(name) {
        var cookieValue = null;
        if (document.cookie && document.cookie !== '') {
            var cookies = document.cookie.split(';');
            for (var i = 0; i < cookies.length; i++) {
                var cookie = cookies[i].trim();
                // Does this cookie string begin with the name we want?
                if (cookie.substring(0, name.length + 1) === (name + '=')) {
                    cookieValue = decodeURIComponent(cookie.substring(name.length + 1));
                    break;
                }
            }
        }
        return cookieValue;
    }

    function uuidv4() {
        return 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, function (c) {
            var r = Math.random() * 16 | 0,
                v = c == 'x' ? r : (r & 0x3 | 0x8);
            return v.toString(16);
        });
    }

    let device = getCookie('device')

    if (device == null || device == undefined) {
        device = uuidv4()
    }

    document.cookie = 'device=' + device + ";domain=;path=/"
</script>
{% endblock %}